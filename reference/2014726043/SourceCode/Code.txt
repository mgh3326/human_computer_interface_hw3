
<html>
<head>
    <title>Ugly calculator using JQuery and math.js Version 2</title>
    <style type="text/css">
        body {
            margin: 0px 0px 0px 0px;
        }
		h1{
			text-align: center;
			text-rendering: optimizeLegibility;
			color: #191919;
		}


        #calculator {
			border: #191919;
			border-style: solid;
			border-width: 3px;
            font-size: 0;
            width: 480px;
            background-color: #F6F6F6;
            padding: 20px;
            margin: auto;
            border-radius: 10px;           
        }
		
		#history{
			width: 457px;
			height: 70px;
			margin-bottom: 15px;
			padding: 5px;
			background-color: #89FF82;
			border-radius: 5px;
			text-align: right;
			display: inline-flex;
			border: #191919;
			border-style: solid;
			border-width: 2px;
            font: 20px digital;
			overflow: auto;
			justify-content: flex-end;
					
		}
       
        #result {
            width: 400px;
            height: 35px;
            margin-bottom: 15px;
            padding: 5px;
            background-color: #2FED28;
            border-radius: 5px;
            display: inline-flex;
            justify-content: flex-end;
            align-items: center;
            overflow: auto;
            border: #191919;
			border-style: solid;
			border-width: 2px;
            font: 20px digital;
        }

        .key {
            width: 46px;
            height: 30px;
            background-color: #FFFFFF;
            display: inline-flex;
            margin: 3px 10px 8px 0px;
            vertical-align: middle;
            justify-content: center;
            align-items: center;
            padding: 10px 0px 5px 0px;
			border: #191919;
			border-style: solid;
			border-width: 2px;
			border-color: #191919;
            border-radius: 10px;
            cursor: pointer;
            font: bold 20px sans-serif;
        }
		
		.etc-key{
			background-color: #FFD9FA;
		}
		
		.operator-key{
			background-color: #C4FDFF;
		
		}

        .symbol-key {
			background-color: #FFFFA1;
            font: italic 20px "Times New Roman"
        }

        .function-key {
			background-color: #FFFFA1;
            font: italic 15px "Times New Roman"
        }

        .eval-key {
            background-color: #1DDB16;
            color: white;
        }
		.clear-key{
			margin-left: 6px;
			margin-bottom: 15px;
			background-color: #FF0000;
            color: white;
		}
       
        .clearEntry-key {
            background-color: #FF0000;
            color: white;
        }
       
        .key:active {
            background-color: #a1a1a1;
            box-shadow: 0 1px #666;
            transform: translateY(2px);
        }
    </style>
 
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js' type='text/javascript'></script>
    <script src='math.js' type='text/javascript'></script>

    <script type="text/javascript">
        $(document).ready(function(){
            var parser = math.parser();

            var displayValue = '0';
			var pre_displayValue = [30];
			var i=0;
            $('#result').text(displayValue);
 
            $('.key').each(function(index, key){       
                $(this).click(function(e){
                    if(displayValue == '0') displayValue = '';

                    if($(this).text() == 'EV')
                    {
                        try
                        {
							var history = displayValue;							
                            displayValue = parser.eval(displayValue).toString();
                            var tokens = displayValue.split(' ');
                            if(tokens[0] == 'function')
                            {
                                displayValue = tokens[0];
                            }
                            $('#result').text(displayValue); 
							$('#history').prepend(history +" ["+displayValue+"]"+"</br>");
                            displayValue = '0';
                        }
                        catch (e)
                        {
                            displayValue = '0';
                            if(displayValue != 'function')
                            {
                                $('#result').text(e);
                            }
                        }               
                    }
                    else
                    {
						
                        if($(this).text() == 'CL')
                        {
                            displayValue = '0';
                            $('#result').text(displayValue);
                        }
						else if($(this).text() == 'CE'){
							displayValue = pre_displayValue[--i];							
							$('#result').text(displayValue);
						}
                        else
                        {   
							pre_displayValue[i++] = displayValue;
                            displayValue += $(this).text();
                            $('#result').text(displayValue);
                        }
                    }

                    e.preventDefault()
                })
            })
        })
    </script>
</head>
 
<body>  
    <h1>Calculator</h1>    
    <div id="calculator">
        <div id="result"></div>
		<span class="key clear-key">CL</span>
		<div id="history"></div>
        <span class="key operator-key">^</span>
        <span class="key operator-key"><</span>
		<span class="key operator-key">></span>
		<span class="key operator-key">!</span>
		<span class="key operator-key">=</span>
		<span class="key function-key">exp</span>
        <span class="key function-key">log</span>
        <span class="key function-key">sqrt</span>
		<span class="key operator-key">+</span>
		<span class="key operator-key">-</span>
		<span class="key operator-key">*</span>
        <span class="key operator-key">/</span>
		<span class="key operator-key">%</span>
		<span class="key function-key">sin</span>
        <span class="key function-key">cos</span>
        <span class="key function-key">tan</span>
		<span class="key">9</span>
		<span class="key">8</span>
		<span class="key">7</span>
		<span class="key etc-key">(</span>
		<span class="key etc-key">)</span>
		<span class="key symbol-key">i</span>
        <span class="key symbol-key">e</span>
        <span class="key symbol-key">pi</span>
		<span class="key">6</span>
		<span class="key">5</span>
		<span class="key">4</span>
		<span class="key etc-key">[</span>
		<span class="key etc-key">]</span>
		<span class="key symbol-key">w</span>
		<span class="key function-key">cross</span>
        <span class="key function-key">det</span>
		<span class="key">3</span>
		<span class="key">2</span>
		<span class="key">1</span>
		<span class="key etc-key">:</span>
		<span class="key etc-key">;</span>
		<span class="key symbol-key">x</span>
        <span class="key symbol-key">y</span>
        <span class="key symbol-key">z</span>
		<span class="key">0</span>
		<span class="key">.</span>
		<span class="key">,</span>
		<span class="key clearEntry-key">CE</span>
        <span class="key eval-key">EV</span>
		<span class="key symbol-key">f</span>
        <span class="key symbol-key">g</span>
		<span class="key symbol-key">h</span>
    </div>
</body>
</html>