<html>
	<head><title>HCI CALCULATOR</title>
		<script src="math.js" type='text/javascript'></script>
		<script type="text/javascript">
				var history = [];
				var his_index = 0;
				var parser = math.parser();
				var isChanged = false;

				// reset
				function reset(){
					document.getElementById('input').innerHTML = "0";
				}
				// append history calc text
				function append(ad){
					var history_text = document.getElementById('histories');
					var ap = (ad) + "\r\n";
					history_text.value += ap;
				}

				//// basic operation //
				function button_click(e){
					var key = e;
					value = document.getElementById('input').innerHTML;

					if(value == 0 || value == "INPUT"){
							document.getElementById('input').innerHTML = '';
							value = "";
						}

					if(key == "EV"){
						   // calculate
							try{
									value = value.replace(/Ã—/gi, '*');
									var tmp = parser.eval(value);
									tmp = tmp.toString();
									var isFunc = tmp.split(" ");
									if(isFunc[0] == "function") tmp = "function>> " + value;
									document.getElementById('result').innerHTML = tmp;
									var add = (value + ' = ' + tmp).toString();
									append(add);
									reset();
							}catch (execption){
								document.getElementById('result').innerHTML = "ERROR";
								reset();
							}

					}
							// clear
					else if(key == "CLEAR"){
						document.getElementById('result').innerHTML = "0";
						reset();
 					}
						 // delete
					else if(key == "<~"){
						var current = value;
						if(current.length == 1){
							reset();
							return;
						}
						var prev = current.substring(0,(current.length-1));
						document.getElementById('input').innerHTML = prev;
					}
						 // input text
					else{
						value += key;
						document.getElementById('input').innerHTML = value;
					}
		}

		function options(e){
			var doing = e;
			switch(doing){
				case "reverse":
				for(var i=1; i<=3; i++){
					var e = document.getElementsByClassName('reversing')[i].getAttribute('value');
					if(isChanged == false){
						var text = "a" + e;
						document.getElementsByClassName('reversing')[i].innerHTML = text;
						document.getElementsByClassName('reversing')[i].value = text;
					}
					else {
						var origin = e.substring(1, e.length);
						document.getElementsByClassName('reversing')[i].innerHTML = origin;
						document.getElementsByClassName('reversing')[i].value = origin;
					}
				}
				if(isChanged) {
					document.getElementsByClassName('reversing')[0].innerHTML = "deg"
					isChanged = false;
				}
				else{
					document.getElementsByClassName('reversing')[0].innerHTML = "rad"
					isChanged = true;
				}
				break;
				// option buttons
				case "history":
				  var text_box = document.getElementById("histories");
    			if (text_box.style.visibility == "hidden") {
						var position = document.getElementById("textbox");
						var top = get_pos_top(position);
						var left = get_pos_left(position);
						text_box.style.top = top;
						text_box.style.left = left;
        			text_box.style.visibility = "visible";
    			} else {
        			text_box.style.visibility = "hidden";
    			}
					break;
			}
		}
		// find left-position
		function get_pos_left(pos){
   			if(pos.offsetParent==document.body)
     			return pos.offsetLeft;
   			else
     			return pos.offsetLeft+get_pos_left(pos.offsetParent) + 10;
 		}
		// find top-position
		function get_pos_top(pos){
   		if(pos.offsetParent==document.body)
     		return pos.offsetTop;
   		else
     		return pos.offsetTop+get_pos_top(pos.offsetParent);
		}
	</script>

	<style type="text/css">
			button.type,	button.type::after {
			  -webkit-transition: all 0.3s;
			    -moz-transition: all 0.3s;
			  -o-transition: all 0.3s;
			    transition: all 0.3s;
			}
			button.type {
			  background: none;
			  border: 3px solid #fff;
			  border-radius: 5px;

			  width: 200;
			  font-size: 15px;
			  font-weight: bold;
			  margin: 0;
			  padding-left: 10;
			  position: relative;
			  text-transform: uppercase;
				inline-block: none;
			}

			button.type{
		  background:rgb(255,211,176);
		  color:white;
		  border:none;
		  height:110px;
		  font-size: 20px;
		  padding:0;
		  cursor:pointer;
		  transition:800ms ease all;
		  outline:none;

		}

		a:link {color:black; text-decoration:none;}
		a:visited {color:white; text-decoration:none;}
		a:active {color:black; text-decoration:none;}
		a:hover {color:black; text-decoration:none;}

		button.type:hover{
		  background:#fff;
		  color:black;
		}
		button.type:before,button.type:after{
		  top:0;
		  right:0;
		  height:2px;
		  width:0;
		  background: white;
		  transition:400ms ease all;
		}
		button.type:after{
		  right:inherit;
		  top:inherit;
		  left:0;
		  bottom:0;
		}
		button.type:hover:before,button.type:hover:after{
		  width:100%;
		  transition:800ms ease all;
		}

		button.calc,button.calc::after {
			  -webkit-transition: all 0.3s;
			    -moz-transition: all 0.3s;
			  -o-transition: all 0.3s;
			    transition: all 0.3s;
			}
		button.calc {
			  border: 2px solid none;
				background-color: white;
				height: 50px;
				width: 70px;
			  border-radius: 7px;
				font-size: 20px;
			  font-weight: bold;
			  position: relative;
				font-family: sans-serif Helvetica;
		}

			button.calc::before,button.calc::after {
			  background: #fff;
			  content: '';
			  position: absolute;
			  z-index: -1;
			}

			button.calc:hover {
			  color: red;
			}

			.btn::after {
			  height: 0;
			  left: 0;
			  top: 0;
			  width: 100%;
			}
			.btn:hover:after {
				background-color: #666;
  			color: #fff;
  			border-color: #000;

			}
			table{
				border: 2px solid none;
				border-collapse: collapse;
				border-radius: 20px;
			}
			.third{
				margin-right: 15px;
			}
			button.before{
				color: white;
			}
			td{
				background-color: rgb(200,200,200);
			}
			p{
				background-color: white;
				margin: 10 0 10 0;
				border-radius: 5px;
				height: 40;
				width: 420;
				font-size: 28px;
				color: rgb(140,140,140);
			}
			.EV{
				color: white;
			}
			button.RED:hover{
				color: white;
			}
			.option{
				  display: inline-block;
				  *display: inline;
				  zoom: 1;
				  padding: 6px 6px;
				  margin: 0;
				  cursor: pointer;
				  border: 1px solid #bbb;
				  overflow: visible;
				  font: bold 11px arial, helvetica, sans-serif;
				  text-decoration: none;
				  white-space: nowrap;
				  color: #555;

				  background-color: #ddd;
				  background-image: -webkit-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
				  background-image: -moz-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
				  background-image: -ms-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
				  background-image: -o-linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));
				  background-image: linear-gradient(top, rgba(255,255,255,1), rgba(255,255,255,0));

				  -webkit-transition: background-color .2s ease-out;
				  -moz-transition: background-color .2s ease-out;
				  -ms-transition: background-color .2s ease-out;
				  -o-transition: background-color .2s ease-out;
				  transition: background-color .2s ease-out;
				  background-clip: padding-box;
				  -moz-border-radius: 3px;
				  -webkit-border-radius: 3px;
				  border-radius: 3px;
				  -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, .3), 0 2px 2px -1px rgba(0, 0, 0, .5), 0 1px 0 rgba(255, 255, 255, .3) inset;
				  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .3), 0 2px 2px -1px rgba(0, 0, 0, .5), 0 1px 0 rgba(255, 255, 255, .3) inset;
				  box-shadow: 0 1px 0 rgba(0, 0, 0, .3), 0 2px 2px -1px rgba(0, 0, 0, .5), 0 1px 0 rgba(255, 255, 255, .3) inset;
				  text-shadow: 0 1px 0 rgba(255,255,255, .9);

				  -webkit-touch-callout: none;
				  -webkit-user-select: none;
				  -khtml-user-select: none;
				  -moz-user-select: none;
				  -ms-user-select: none;
				  user-select: none;
				}

				.option:hover{
				  background-color: #eee;
				  color: #555;
				}
				.option:active{
				  background: #e9e9e9;
				  position: relative;
				  top: 1px;
				  text-shadow: none;
				  -moz-box-shadow: 0 1px 1px rgba(0, 0, 0, .3) inset;
				  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .3) inset;
				  box-shadow: 0 1px 1px rgba(0, 0, 0, .3) inset;
				}
				#var{
					font-size: 12px;
					font-weight: bold;
					font-family: sans-serif Helvetica;
					color: red;
				}
				.vars{
					border-color: rgb(255,100,100);
					border-width: medium;
				}

			button.turn_white:hover{
				color: white;
			}
			#histories{
				inline-block: none;
				visibility: hidden;
				position: absolute;
  			width: 220px;
  			height: 120px;
				inline-block: none;
				z-index: 1;
				text-align: left;
			}
		</style>

</head>
	<body>
		<!--title-->
		<div>
			<textarea name="text" id="histories" style="text-align: left;"><HISTORY>

</textarea>
		</div>
		  <!--text-->
		<center>

			<!--table-->
		<table align="center">
			<tr>
				<td height="20" style="border-radius: 10px 0px 0px 0px;"></td><td></td><td></td><td></td><td></td><td><td></td></td><td></td><td></td><td></td><td style="border-radius: 0px 10px 0px 0px;"></td>
			</tr>
			<tr >
				<td height="20" ></td><td></td><td></td><td></td><td></td><td><td></td></td><td></td>
				<td style="font-size: 11px; font-weight: bold;">
					<button class="option" value="reverse" onclick="options(this.value)">
						REVERSE
					</button>
				</td>
					<td text-align="left" style="font-weight: bold; font-size:11px">
						<button class="option" value="history" onclick="options(this.value)">
							HISTORY
						</button>
					</td>
						<td></td>
			</tr>

			<div>
			<tr style="text-align: right;">
				<td width="200px" colspan="4" rowspan="2" align="left" style="padding-left: 20" id="textbox">

					<button class="type" width="200"><a href="./index.html"><div style="margin-top: 5px; z-index: 2;">CALCULATOR</div></a></button>

				</td>
					<td colspan="6" value="0" width="400">
						<p id="result" value="0">RESULT</p>
					</td>
					<td></td>
			</tr>

			<tr style="text-align: right;">

					<td colspan="6" value="0" width="400">
						<p id="input">INPUT</p>
					</td><td></td>

			</tr>
			</div>

			<tr>
				<td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td id="var" align="center">variable</td><td></td>
			</tr>
			<!--buttons-->

			<tr>
				<td width="10"></td>
					<td width="50" align="center"><button class="calc btn RED" onclick="button_click(this.value);" value='CLEAR' style="background-color: rgb(255,120,120); font-size: 15px">CLEAR</button></td>
					<td width="50" align="center"><button class="calc btn RED" onclick="button_click(this.value);" value='<~' style="background-color: rgb(255,120,120);"><~</button></td>
					<td width="50" align="center"><button class="calc btn third EV" onclick="button_click(this.value);" value='EV' style="background-color: black;">EV</button></td>
					<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='+' style="background-color: rgb(255,244,192);">+</button></td>
					<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='-' style="background-color: rgb(255,244,192);">-</button></td>
					<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='*' style="background-color: rgb(255,244,192);">*</button></td>
					<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='/' style="background-color: rgb(255,244,192);">/</button></td>
					<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='%' style="background-color: rgb(255,244,192);">%</button></td>
					<td width="50" align="center"><button class="calc btn vars" onclick="button_click(this.value);" value='x'>x</button></td>
					<td width="10"></td>
				</tr>
			<tr>
				<td width="10"></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='7' style="font-size: 30px">7</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='8' style="font-size: 30px">8</button></td>
				<td width="50" align="center"><button class="calc btn third" onclick="button_click(this.value);" value='9' style="font-size: 30px">9</button></td>
				<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='=' style="background-color: rgb(255,244,192);">=</button></td>
				<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='<' style="background-color: rgb(255,244,192);"><</button></td>
				<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='>' style="background-color: rgb(255,244,192);">></button></td>
				<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='!' style="background-color: rgb(255,244,192);">!</button></td>
				<td width="50" align="center"><button class="calc btn turn_white" onclick="button_click(this.value);" value='^' style="background-color: rgb(255,244,192);">^</button></td>
				<td width="50" align="center"><button class="calc btn vars" onclick="button_click(this.value);" value='y'>y</button></td>
				<td width="10"></td>
			</tr>
			<tr>
				<td width="10"></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='4' style="font-size: 30px">4</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='5' style="font-size: 30px">5</button></td>
				<td width="50" align="center"><button class="calc btn third" onclick="button_click(this.value);" value='6' style="font-size: 30px">6</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='['>[</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value=']'>]</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='('>(</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value=')'>)</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='det'>det</button></td>
				<td width="50" align="center"><button class="calc btn vars" onclick="button_click(this.value);" value='z'>z</button></td>
				<td width="10"></td>
			</tr>
			<tr>
				<td width="10"></td>

				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='1' style="font-size: 30px">1</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='2' style="font-size: 30px">2</button></td>
				<td width="50" align="center"><button class="calc btn third" onclick="button_click(this.value);" value='3' style="font-size: 30px">3</button></td>
				<td width="50" align="center"><button class="calc btn reversing" onclick="button_click(this.value);" value='deg'>deg</button></td>
				<td width="50" align="center"><button class="calc btn reversing" onclick="button_click(this.value);" value='sin'>sin</button></td>
				<td width="50" align="center"><button class="calc btn reversing" onclick="button_click(this.value);" value='cos'>cos</button></td>
				<td width="50" align="center"><button class="calc btn reversing" onclick="button_click(this.value);" value='tan'>tan</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='exp'>exp</button></td>
				<td width="50" align="center"><button class="calc btn vars" onclick="button_click(this.value);" value='f'>f</button></td>
				<td width="10"></td>
			</tr>
			<tr>
				<td width="10"></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='0' style="font-size: 30px">0</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='.' style="font-size: 30px">.</button></td>
				<td width="50" align="center"><button class="calc btn third" onclick="button_click(this.value);" value=',' style="font-size: 30px">,</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value=';'>;</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='log'>log</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='sqrt'>sqrt</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='PI'>PI</button></td>
				<td width="50" align="center"><button class="calc btn" onclick="button_click(this.value);" value='e'>e</button></td>
				<td width="50" align="center"><button class="calc btn vars" onclick="button_click(this.value);" value='g'>g</button></td>
				<td width="10"></td>
			</tr>
			<tr height="10"><td width="10" style="border-radius: 0px 0px 0px 10px;"></td><td width="10"></td><td width="10"></td>
				<td width="10"></td><td width="10"></td><td width="10"></td><td width="10"></td><td width="10"></td><td></td>
			<td width="10"></td><td width="10" style="border-radius: 0px 0px 10px 0px;"></td></tr>

		</table>
	</center>
	</body>

</html>
