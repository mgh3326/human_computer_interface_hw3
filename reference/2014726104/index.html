<html>
<head>
<title>calc</title>
<link
	href='https://fonts.googleapis.com/css?family=Open+Sans&subset=latin,greek'
	rel='stylesheet' type='text/css'>
<link href='./css/style.css' rel='stylesheet' type='text/css'>
<style type="text/css">
#calculator {
	width: 550px;
}

#result {
	width: 100%;
	height: 50px;
	border: 1px solid green;
	font: 45px digital;
}

.cb key {
	display: inline-block;
	width: 45px;
	height: 25px;
	border: 1px solid blue;
	font: bold 20px sans-serif;
}
</style>
	

<script
	src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'
	type='text/javascript'></script>
<script src='./js/math3.js' type='text/javascript'></script>

<script type="text/javascript">
        $(document).ready(function(){
            var parser = math.parser();

            var displayValue = '0';
            $('#result').text(displayValue);
 
            $('.key').each(function(index,key){       
                $(this).click(function(e){
                    if(displayValue == '0') displayValue = '';

                    if($(this).text() == 'EV')
                    {
                        try
                        {
                            displayValue = parser.eval(displayValue).toString();
                            var tokens = displayValue.split(' ');
                            if(tokens[0] == 'function')
                            {
                                displayValue = tokens[0];
                            }
                            $('#result').text(displayValue);                         
                            displayValue = '0';
                        }
                        catch (e)
                        {
                            displayValue = '0';
                            if(displayValue != 'function')
                            {
                                $('#result').text(e);
                            }
                        }               
                    }
                    else
                    {
                        if($(this).text() == 'CL')
                        {
                            displayValue = '0';
                            $('#result').text(displayValue);
                        }
                        else
                        {                        
                            displayValue += $(this).text();
                            $('#result').text(displayValue);
                        }
                    }
                })
            })
        })
    </script>
</head>

<body>
	<div class="wrapper">
		<h1 style="text-align: center">공학용 계산기 ver1.</h1>
		<div id="calculator" style="margin:auto;">
			<div id="result"></div>
			<div class="crow">
				<div class="cb key">1</div>
				<div class="cb key">2</div>
				<div class="cb key">3</div>
				<div class="cb key">4</div>
			</div>
			<div class="crow">
				<div class="cb key">5</div>
				<div class="cb key">6</div>
				<div class="cb key">7</div>
				<div class="cb key">8</div>
			</div>
			<div class="crow">
				<div class="cb key">9</div>
				<div class="cb key">0</div>
				<div class="cb key">+</div>
				<div class="cb key">-</div>
			</div>
			<div class="crow">
				<div class="cb key">*</div>
				<div class="cb key">/</div>
				<div class="cb key">%</div>
				<div class="cb key">^</div>
			</div>
			<div class="crow">
				<div class="cb key"><</div>
				<div class="cb key">></div>
				<div class="cb key"><=</div>
				<div class="cb key">>=</div>
			</div>
			<div class="crow">
				<div class="cb key">(</div>
				<div class="cb key">)</div>
				<div class="cb key">[</div>
				<div class="cb key">]</div>
			</div>
			<div class="crow">
				<div class="cb key">.</div>
				<div class="cb key">,</div>
				<div class="cb key">:</div>
				<div class="cb key">;</div>
			</div>
			<div class="crow">
				<div class="cb key">==</div>
				<div class="cb key">!=</div>
				<div class="cb key">i</div>
				<div class="cb key">e</div>
			</div>
			<div class="crow">
				<div class="cb key">pi</div>
				<div class="cb key">w</div>
				<div class="cb key">x</div>
				<div class="cb key">y</div>
			</div>
			<div class="crow">
				<div class="cb key">z</div>
				<div class="cb key">f</div>
				<div class="cb key">g</div>
				<div class="cb key">=</div>
			</div>
			<div class="crow">
				<div class="cb key">exp</div>
				<div class="cb key">log</div>
				<div class="cb key">sqrt</div>
				<div class="cb key">sin</div>
			</div>
			<div class="crow">
				<div class="cb key">cos</div>
				<div class="cb key">tan</div>
				<div class="cb key">cross</div>
				<div class="cb key">det</div>
			</div>
			<div class="crow">
				<div class="cb key">CL</div>
				<div class="cb key">EV</div>
			</div>
		</div>
	</div>
	</div>
</body>
</html>