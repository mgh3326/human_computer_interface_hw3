<html>
    <head>
        <title>2014127035_Ahnseokchan_Task2_Calculator</title>
        <style type="text/css">
        body {
            margin: 0px, 0px, 0px, 0px;
        }
        h1 {
            font-size : 40px; /* 제목 글자 사이즈*/
            text-align : center; /*글자 위치*/
            background-color:lightskyblue; /*배경색상(글자)*/
            color :midnightblue; /*글자색*/
            text-rendering :geometricPrecision;
            font-family :Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; /*글꼴*/
        }
        #Calc {
            width: 360px; /* 계산기 사이즈*/
            height:640px;
            background-color :lightseagreen; /*계산기 몸체 색*/
            border-radius : 10px;
            padding : 15px;/*계산기 몸체와 버튼, 결과값의 간격*/
            margin :auto; /*계산기 위치*/
        }
        #name {
            width: 355px;
            height: 30px;
            margin-bottom: 5px;
            background-color:#cddecc;
            display: inline-flex;
            justify-content: center;
            align-items:center;
            font: 15px digital;
        }
        #Process {
            width: 160px;
            height: 125px;
            margin-bottom: 10px;
            padding: 0px 5px 0px 5px;
            background-color: #cddecc;
            float:left; /*왼쪽에 정렬*/
            border-radius: 5px;
            display: inline-flex; /*도형 안에다가 */
            justify-content:flex-start; /* 글자 위치 시작부분(왼쪽) */
            overflow: hidden; 
            box-shadow: inset 0 0px 3px;
            font: 20px digital;          
        } 
        #Res_Value {
            width: 345px;
            height: 45px;
            margin-bottom: 5px;
            padding: 0px 5px 0px 5px;
            background-color: #cddecc;
            border-radius: 5px;
            display: inline-flex;
            justify-content: flex-end;
            align-items:center;
            overflow: hidden;
            box-shadow: inset 0 0px 3px;
            font: 20px digital;
        }
        #Store {
            width: 160px;
            height: 125px;
            margin-bottom: 10px;
            margin-left: 5px;
            margin-right: 5px;
            background-color:darkgrey;
            float: right;
            display: inline-flex;
            justify-content:flex-start;
            padding: 0px 5px 0px 5px;
            overflow: hidden; 
            box-shadow: inset 0 0px 3px;
            font: 15px digital;
        }
        .Btn {
            width: 62px;
            height: 40px;
            background-color:aliceblue;
            display: inline-flex;
            margin: 3px 5px 8px 0px;
            vertical-align: middle;
            justify-content: center;
            align-items: center; /* 버튼 안의 숫자 위치 */
            padding: 5px 0px 5px 0px;
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 3px 0 #a1a1a1, 0 2px 5px rgba(0, 0, 0, .75);
            font: bold 20px sans-serif;
        }
        .eval-Btn {
            background-color: #4a9840;
            color: white;
        }
       
        .clear-Btn {
            background-color: #bb1c09;
            color: white;
        }
        </style>
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js' type='text/javascript'></script>
        <script src='math.js' type='text/javascript'></script>
    
        <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>  
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
              "HTML-CSS": { scale: 75}
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                var parser = math.parser();
                var shop = '';
                var shop2 ='';
                var num = '0';
                $('#Res_Value').text(num);
                $('#Process').html('$$' + math.parse(num).toTex() + '$$');
                $('#Store').text("없음");
     
                $('.Btn').each(function(index, Btn){       
                    $(this).click(function(e){
                        if(num == '0') num = '';
    
                        if($(this).text() == 'EV')
                        {
                            try
                            {
                                num = parser.eval(num).toString();
                                var tokens = num.split(' ');
                                if(tokens[0] == 'function')
                                {
                                    num = tokens[0];
                                }
                                $('#Res_Value').text(num);                         
                                num = '0';
                               
                            }
                            catch (e)
                            {
                                num = '0';
                                if(num != 'function')
                                {
                                    $('#Res_Value').text(e);
                                }
                            }               
                        }
                        else
                        {
                            if($(this).text() == 'CL') /*CL버튼일떄 한번에 0으로 초기화 */
                            {
                                num = '0';
                                $('#Res_Value').text(num);
                                $('#Process').text(num);
                            }
                            else if($(this).text() == '←') /*한글자씩 지우기 */
                            {
                                num = num.slice(0,-1); /*끝에것만 삭제 */
                                if(num == '') { // 한칸씩 지우다가 빈공간이되면
                                    num = '0'; // 0으로 초기화
                                }
                                $('#Res_Value').text(num); /* 끝을 지운 것을 대입 */
                                $('#Process').text(num);
                            }
                            else if($(this).text() == 'CP') /*페이지 넘기기 */
                            {
                                if(num == 0) {
                                    $('#Res_Value').text("0");
                                    $('#Process').text("0");
                                } else {
                                    $('#Res_Value').text(num); /*값이 0이 아닐시 그대로 가져감 */
                                    $('#Process').text(num);
                                }
                            }
                            else if($(this).text() == '저장') { /*저장 목록에 쌓기 */
                                try //함수 즉 x=y형식이어야 수행
                                {
                                    num = parser.eval(num).toString();
                                    var tokens = num.split(' ');
                                    if(tokens[0] == 'function')
                                    {
                                        num = tokens[0];
                                    }
                                    shop = $('#Res_Value').text();
                                    shop = shop.toString();
                                    shop2 += shop + ", ";
                                    $('#Store').text(shop2);
                                    $('#Res_Value').text("저장 완료!");
                                    num = '0';
                                 }
                                 catch (e)
                                 {
                                      num = '0';
                                 if(num != 'function')
                                 {
                                    $('#Res_Value').text(e);
                                 }
                              }                         
                            }
                            else if($(this).text() == 'init') { /*저장목록 초기화 */
                                shop = "";
                                shop2 = shop;
                                $('#Store').text("없음");
                            }
                            else if($(this).text() == '  ') {} // undefined 오류 제거
                            else if($(this).text() == '1/4') {}
                            else if($(this).text() == '2/4') {}
                            else if($(this).text() == '3/4') {}
                            else if($(this).text() == '4/4') {}
                            else // 나머지 버튼 수행
                            {                        
                                num += $(this).text();
                                $('#Res_Value').text(num);
                                $('#Process').text(num);
                            }
                            var node = math.parse(num);
                            var Process = node.toTex({parenthesis: 'keep', implicit: 'hide'});
                            var elem = MathJax.Hub.getAllJax('Process')[0];
                            MathJax.Hub.Queue(['Text', elem, Process]);                      
                        }
                        e.preventDefault()
                    })
                })
            })
        </script>
        <script type="text/javascript">
            function CP_function() { //CP버튼 함수
                var pg = document.getElementById('page').innerHTML;
    
                if(pg == "1/4") { // 조건에 맞추어 각 ID에 해당하는 버튼 변화
                    document.getElementById('page').innerHTML = "2/4";
                    document.getElementById('chg1').innerHTML = "pi";
                    document.getElementById('chg2').innerHTML = "^";
                    document.getElementById('chg3').innerHTML = "exp";
                    document.getElementById('chg4').innerHTML = "sqrt";
                    document.getElementById('chg5').innerHTML = "sin";
                    document.getElementById('chg6').innerHTML = "cos";
                    document.getElementById('chg7').innerHTML = "tan";
                    document.getElementById('chg8').innerHTML = "log";
                }
                else if(pg == "2/4") {
                    document.getElementById('page').innerHTML = "3/4";
                    document.getElementById('chg1').innerHTML = "cross";
                    document.getElementById('chg2').innerHTML = "det";
                    document.getElementById('chg3').innerHTML = "inv";
                    document.getElementById('chg4').innerHTML = ",";
                    document.getElementById('chg5').innerHTML = ":";
                    document.getElementById('chg6').innerHTML = ";";
                    document.getElementById('chg7').innerHTML = "  ";
                    document.getElementById('chg8').innerHTML = "  ";
                }
                else if(pg == "3/4") {
                    document.getElementById('page').innerHTML = "4/4";
                    document.getElementById('chg1').innerHTML = "<";
                    document.getElementById('chg2').innerHTML = "<=";
                    document.getElementById('chg3').innerHTML = ">";
                    document.getElementById('chg4').innerHTML = ">=";
                    document.getElementById('chg5').innerHTML = "!=";
                    document.getElementById('chg6').innerHTML = "==";
                    document.getElementById('chg7').innerHTML = "  ";
                    document.getElementById('chg8').innerHTML = "  ";
                }
                else { // id page가 4/4이면 다시 원래대로 돌아옴
                    document.getElementById('page').innerHTML = "1/4";
                    document.getElementById('chg1').innerHTML = "init";
                    document.getElementById('chg2').innerHTML = "x";
                    document.getElementById('chg3').innerHTML = "y";
                    document.getElementById('chg4').innerHTML = "z";
                    document.getElementById('chg5').innerHTML = "f";
                    document.getElementById('chg6').innerHTML = "g";
                    document.getElementById('chg7').innerHTML = "i";
                    document.getElementById('chg8').innerHTML = "e";
                }
    
            }
            </script>
    </head>
    <body>
        <h1>
            Task2_Calculator_2014127035
        </h1>
        <div id="Calc">
            <div id="name"><계산 과정> . . . . . . . . . . . <저장 목록></div>
            <div id="Process"></div>
            <div id="Store"></div>
            <div id="Res_Value"></div>
            <span class="Btn">[</span>
            <span class="Btn">]</span>
            <span class="Btn">.</span>
            <span class="Btn clear-Btn">CL</span>
            <span class="Btn">←</span>
            <span class="Btn">(</span>
            <span class="Btn">)</span>
            <span class="Btn">7</span>
            <span class="Btn">8</span>
            <span class="Btn">9</span>
            <span class="Btn">+</span>
            <span class="Btn">-</span>
            <span class="Btn">4</span>
            <span class="Btn">5</span>
            <span class="Btn">6</span>
            <span class="Btn">*</span>
            <span class="Btn">/</span>
            <span class="Btn">1</span>
            <span class="Btn">2</span>
            <span class="Btn">3</span>
            <span class="Btn">%</span>
            <span class="Btn">=</span>
            <span class="Btn">저장</span>
            <span class="Btn">0</span>
            <span class="Btn eval-Btn">EV</span>
            <span class="Btn" onclick="CP_function();">CP</span>
            <span class="Btn" id="chg1">init</span>
            <span class="Btn" id="chg2">x</span>
            <span class="Btn" id="chg3">y</span>
            <span class="Btn" id="chg4">z</span>
            <span class="Btn" id="chg5">f</span>
            <span class="Btn" id="chg6">g</span>
            <span class="Btn" id="chg7">i</span>
            <span class="Btn" id="chg8">e</span>
            <span class="Btn" id="page">1/4</span>
        </div>
    </body>
</html>